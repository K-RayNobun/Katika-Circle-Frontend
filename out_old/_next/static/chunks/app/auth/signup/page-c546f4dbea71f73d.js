(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{4058:(e,a,s)=>{Promise.resolve().then(s.bind(s,7596))},7596:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>f});var t=s(5155),r=s(2115),n=s(5565),l=s(696),o=s(6046),i=s(8173),c=s.n(i),d=s(2950),p=s(1589),u=s(2651),m=s(734),x=s(5725),h=s(4241);let f=()=>{let e=(0,o.useRouter)(),a=(0,o.useSearchParams)(),s="appearance-none flex-1 w-full h-[44px] border-2 gap-[8px] border-gray_dark/60 py-[10px] px-[14px] rounded-[8px] text-primary_text focus:border-primary focus:border-2 focus:outline-none",[i,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[b,k]=(0,r.useState)(!1),[w,j]=(0,r.useState)(null),[v,N]=(0,r.useState)(""),[_,C]=(0,r.useState)(),[A,T]=(0,r.useState)(""),[z,S]=(0,r.useState)([]),R=(0,r.useRef)(""),[O,I]=(0,r.useState)(!1),[E,F]=(0,r.useState)({ref_code:""}),P=(0,r.useRef)(null),L=(0,m.j)(),G=(0,m.G)(e=>e.user),U=async()=>{try{await (0,l.Jv)("google",{callbackUrl:"/"})}catch(e){console.error("Signin failed:",e),alert("Signin failed, Please try again.")}},B=()=>{f(e=>!e)},D=e=>/^[A-Za-z ]+$/.test(e),H=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),K=(e,a)=>e===a&&e.length>=6,M=e=>e.length>0,Z=async()=>{console.log("Sending OTP"),console.log("Access Token is: ",R.current);let e=await u.A.post("https://blank-lynde-fitzgerald-ef8fba55.koyeb.app/auth/account/otp",{},{headers:{Authorization:"Bearer "+R.current,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});console.log("Finished sending OTP with the token",R),console.log("Just sent the token successfully as ",e.data)},V=async e=>{e.preventDefault(),console.log("Registering user");let a=new FormData(P.current),s=await u.A.post("https://blank-lynde-fitzgerald-ef8fba55.koyeb.app/auth/account/signin",{fname:a.get("user_firstname"),lname:a.get("user_name"),email:a.get("user_email"),pwd:a.get("password"),countryCode:_.name,pReferralCode:a.get("ref_code")},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});console.log("User data: ",s.data.data),R.current=s.data.data["access-token"],console.log("Finished registering user"),L((0,h.Bb)({token:s.data.data["access-token"],expiresIn:null})),Z()},J=()=>{k(e=>!e)},W=async()=>{let e=Number(document.getElementById("country-select").value);console.log("Selected country index is: ",e),C(z[e]),console.log("Selected country index is: ",e),T((await u.A.post("https://countriesnow.space/api/v0.1/countries/flag/images",{iso2:z[e].alpha2},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}})).data.data.flag)},$=async e=>{let a=e.target.value;console.log("Checking ",a),a.slice(0,3).includes("KTK")?console.log("The referral code verdict is ",(await u.A.get("https://blank-lynde-fitzgerald-ef8fba55.koyeb.app/api/v1/referral/parent?code=".concat(a),{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}})).data.data):j("Invalid Referral Code")};return(0,r.useEffect)(()=>{(async()=>{let e=await u.A.get("https://api-stg.transak.com/api/v2/countries",{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});S(e.data.response),T((await u.A.post("https://countriesnow.space/api/v0.1/countries/flag/images",{iso2:e.data.response[53].alpha2},{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}})).data.data.flag)})()},[]),(0,r.useEffect)(()=>{let e=a.get("ref_code"),s=G.firstReferringCode;console.log("Th params got changed !!!"),e?(F({ref_code:e}),I(!0),L((0,x.O4)(e)),console.log("Now the Ref Code is Readonly")):s&&(console.log("The user has a predefined referring code known as ",s),F({ref_code:s}),I(!1),console.log("Referring code set"))},[a]),(0,r.useEffect)(()=>{let e=document.getElementById("country-select");e&&(e.selectedIndex=53)},[z]),(0,t.jsxs)("div",{className:"flex flex-1 flex-col justify-start flex-1 px-[4%] sm:px-[10%] lg:px-[30px] py-[32px] ",children:[(0,t.jsxs)("div",{className:"relative mb-0",children:[(0,t.jsx)("div",{className:" absolute top-0 left-0 w-full h-2 bg-gray rounded-full"}),(0,t.jsx)("div",{className:" absolute top-0 left-0 w-[2%] h-2 bg-primary rounded-full"})]}),(0,t.jsx)("div",{className:"text-end mt-3 text-primary_text text-[14px] mb-4",children:"0%"}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("h3",{className:"font-bold mt-2 text-[28px] text-purple-900 leading-12",children:"Cr\xe9er un compte"}),(0,t.jsx)("h5",{className:"text-[17px]",children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit."})]})}),(0,t.jsxs)("form",{ref:P,onSubmit:a=>{a.preventDefault();let s=new FormData(P.current),t=s.get("user_firstname"),r=s.get("user_name"),n=s.get("user_email"),l=s.get("password"),o=s.get("confirm_password");if(t.length<2||!D(t)){j("Enter a valid name "),N("user_firstname");return}if(r.length<2||!D(r)){j("Enter a valid surname"),N("user_name");return}if(!K(l,o)){j("Password do not match."),N("password_match");return}if(!H(n)){j("Please enter a valid email address."),N("user_email");return}if(M(_.name)||j("Please select a country."),!b){j("Please accept the terms and conditions.");return}j(null),N(""),console.log("Processing submission"),V(a),console.log("THE COUNTRY CODE OF THE USER IS ",_.name),L((0,x.kg)({name:t,surname:r,email:n,pwdhash:l,country:_.name,countryCodeISO2:_.alpha2,verified:!1})),e.push("/auth/pincheck"),console.log("Finished signup")},className:"w-full mt-4 space-y-[16px]",children:[(0,t.jsxs)("div",{className:"w-full flex gap-[14px]",children:[(0,t.jsx)("input",{type:"text",name:"user_firstname",className:"".concat(s," ").concat("user_firstname"===v?"border-2 border-red":""),placeholder:"Nom"}),(0,t.jsx)("input",{type:"text",id:"user_name",name:"user_name",className:"".concat(s," ").concat("user_name"===v?"border-2 border-red":""),placeholder:"Prenom"})]}),(0,t.jsx)("input",{type:"text",id:"user_email",name:"user_email",className:"".concat(s," ").concat("user_email"===v?"border-2 border-red":""),style:{WebkitAppearance:"none",MozAppearance:"textfield"},placeholder:"Email"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:i?"text":"password",name:"password",className:"".concat(s," ").concat("password_match"===v?"border-2 border-red":""),placeholder:"Mot de passe"}),i?(0,t.jsx)(d.Fnz,{onClick:B,className:"absolute top-[12px] right-[12px] size-[20px] text-gray_dark/60"}):(0,t.jsx)(d.ZT8,{onClick:B,className:"absolute top-[12px] right-[12px] size-[20px] text-gray_dark/60"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:g?"text":"password",name:"confirm_password",className:"".concat(s," ").concat("password_match"===v?"border-2 border-red":""),placeholder:"Confirmer le mot de passe"}),g?(0,t.jsx)(d.Fnz,{onClick:()=>{y(e=>!e)},className:"absolute top-[12px] right-[12px] size-[20px] text-gray_dark/60"}):(0,t.jsx)(d.ZT8,{onClick:B,className:"absolute top-[12px] right-[12px] size-[20px] text-gray_dark/60"}),"            "]}),(0,t.jsxs)("div",{className:"w-full flex gap-[14px]",children:[(0,t.jsxs)("div",{className:"flex items-center ".concat(s," rounded-[8px] bg-primary/10 px-[14px] py-[8px] gap-[12px]"),children:[(0,t.jsx)("img",{src:A,alt:"",className:"w-[30px]"}),(0,t.jsx)("select",{id:"country-select",name:"country",defaultValue:53,onChange:W,className:"bg-transparent w-[90%] font-bold text-primary_dark",children:Object.entries(z).map((e,a)=>{let[s,r]=e;return(0,t.jsx)("option",{value:s,className:"w-full text-black bg-white appearance-none",style:{MozAppearance:"none",WebkitAppearance:"none"},children:r.name},a)})})]}),(0,t.jsx)("input",{type:"text",id:"refcode",name:"ref_code",onChange:$,className:"".concat(s," ").concat("ref_code"===v?"border-2 border-red":""),defaultValue:E.ref_code,maxLength:7,readOnly:O,placeholder:"Referral Code"})]}),(0,t.jsxs)("div",{className:"flex items-start gap-[8px] h-[20px]",children:[b?(0,t.jsxs)("div",{onClick:J,className:"relative size-5",children:[(0,t.jsx)("input",{type:"checkbox",className:"appearance-none rounded-sm size-4 md:size-5 mt-0 border-primary border-2 text-primary before:transform duration-500 ease-in-out"}),(0,t.jsx)(p.CMH,{className:"absolute text-[14px] top-1/2 left-1/2 translate-x-[-50%] translate-y-[-60%] text-primary"})]}):(0,t.jsx)("div",{className:"",children:(0,t.jsx)("input",{onClick:J,type:"checkbox",className:"appearance-none rounded-sm size-4 md:size-5 mt-0 border-primary border-2 text-primary before:transform duration-500 ease-in-out"})}),(0,t.jsxs)("h4",{className:"text-[12px] leading-4 sm:leading-4 sm:text-[14px] text-gray_dark/60 leading-[24px]",children:[" By clicking this button, you agree to the ",(0,t.jsx)("a",{href:"https://katika.io/userlicenseagreement",className:"text-primary font-bold",children:"terms and conditions"})," and ",(0,t.jsx)("a",{href:"https://katika.io/privacypolicy",className:"text-primary font-bold",children:"privacy policy"})]})]}),(0,t.jsx)("div",{children:w&&(0,t.jsx)("h4",{className:"text-red font-bold text-center text-sm h-min",children:w})}),(0,t.jsx)("input",{type:"hidden",id:"pin_code",name:"pin_code",value:"84762"}),(0,t.jsx)("button",{type:"submit",className:"bg-primary hover:bg-primary_dark py-[10px] rounded-[8px] text-white w-full",children:(0,t.jsx)("h6",{className:"text-center font-bold",children:"Cr\xe9er un compte"})}),(0,t.jsx)("h4",{className:"font-bold text-center my-[0px]",children:"Ou"}),(0,t.jsxs)("button",{onClick:U,className:"bg-white border border-gray_dark/60 flex justify-center gap-[8px] py-[10px] rounded-[8px] w-full",children:[(0,t.jsx)(n.default,{src:"/auth/googlelogo.png",alt:"",width:25,height:25,className:"size-[25px]"}),(0,t.jsx)("h6",{className:"text-center font-bold",children:"Continuer avec Google"})]}),(0,t.jsxs)("h4",{className:"text-center text-[14px] sm:text-[16px] leading-[24px]",children:[" Vous avez un compte ? ",(0,t.jsx)("span",{className:"text-primary font-bold",children:(0,t.jsx)(c(),{href:"/signin",target:"_blank",children:"Connectez vous"})})]})]})]})}},4241:(e,a,s)=>{"use strict";s.d(a,{Ay:()=>o,Bb:()=>r,X1:()=>l});let t=(0,s(9442).Z0)({name:"accesstoken",initialState:{token:null},reducers:{renewToken:(e,a)=>{e.token=a.payload.token,e.expiresIn=a.payload.expiresIn,console.log("Token : ",e.token+" is valid for "+e.expiresIn+" time")},clearToken:e=>{e.token=null,e.expiresIn=null},resetToken:e=>{e.token=null,e.expiresIn=null}}}),{renewToken:r,clearToken:n,resetToken:l}=t.actions,o=t.reducer},5725:(e,a,s)=>{"use strict";s.d(a,{Ay:()=>h,C$:()=>d,FH:()=>n,Gy:()=>c,Ii:()=>p,Mp:()=>l,O4:()=>i,kg:()=>r,p3:()=>x,z0:()=>o});let t=(0,s(9442).Z0)({name:"user",initialState:{name:"",surname:"",email:"",pwdhash:"",country:"",verified:!1},reducers:{createUser:(e,a)=>{console.log("Hello I am creating a user..."),e.name=a.payload.name,e.surname=a.payload.surname,e.email=a.payload.email,e.pwdhash=a.payload.pwdhash,e.country=a.payload.country,console.log("The user information are : ",e.name+e.pwdhash+e.email)},verifyUser:(e,a)=>{e.verified=a.payload,console.log("	 ###Verifying the user as ",e.verified)},setWalletAdress:(e,a)=>{e.walletAddress=a.payload,console.log("	 ### The wallet address has been set as ",e.walletAddress)},setReferralCode:(e,a)=>{e.referralCode=a.payload,console.log("	 ### The referral Code is ",e.referralCode)},setFirstReferringCode:(e,a)=>{e.firstReferringCode=a.payload,console.log("	 ### The First Referring code has been set to ",e.firstReferringCode)},setReferralList:(e,a)=>{e.referralList=a.payload,console.log("	  ### Just registered the user referrals as ",e.referralList)},setProfileImageKey:(e,a)=>{e.profileImageKey=a.payload,console.log("	  ### This user profile image has the key ",e.profileImageKey)},provideCashback:(e,a)=>{e.cashback=a.payload,console.log("	 ### The user cashback is ",e.cashback)},provideReferralGain:(e,a)=>{e.referralGain=a.payload,console.log("	 ### The user referral gain is ",e.referralGain)},provideFilleulsList:(e,a)=>{e.referralList=a.payload,console.log("	 ### The user referral list is ",e.referralList)},resetUser:e=>{e.name="",e.surname="",e.email="",e.pwdhash="",e.walletAddress="",e.country="",e.verified=!1,e.referralCode="",e.referralGain=0,e.referralList=[],e.cashback=0}}}),{createUser:r,verifyUser:n,setWalletAdress:l,setReferralCode:o,setFirstReferringCode:i,setProfileImageKey:c,setReferralList:d,provideCashback:p,provideFilleulsList:u,provideReferralGain:m,resetUser:x}=t.actions,h=t.reducer},734:(e,a,s)=>{"use strict";s.d(a,{G:()=>n,j:()=>r});var t=s(3391);let r=t.wA,n=t.d4}},e=>{var a=a=>e(e.s=a);e.O(0,[150,446,391,651,442,970,390,696,441,517,358],()=>a(4058)),_N_E=e.O()}]);