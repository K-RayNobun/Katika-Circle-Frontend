(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[719],{3943:(e,t,a)=>{Promise.resolve().then(a.bind(a,821))},821:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var o=a(5155),l=a(2115),r=a(6046),s=a(2651),n=a(734),i=a(5725);let c=e=>{let{identifier:t,digitValue:a,isPinCorrect:l,onClick:r,handleChangeFunction:s}=e;return(0,o.jsx)("input",{id:t,type:"text",value:a,onClick:r,onChange:s,maxLength:5,className:"appearance-none size-[56px] text-center text-[28px] font-[400] text-primary_text rounded-[12px] border-2 focus:border-2 ".concat(!0==l?"border-green focus:border-green":!1==l?"border-red focus:border-red":"border-gray_dark/60 focus:border-primary"),style:{WebkitAppearance:"none",MozAppearance:"textfield"}})},d=()=>{let e=(0,r.useRouter)(),[t,a]=(0,l.useState)([,,,,,].fill("")),[d,u]=(0,l.useState)(1),[p,h]=(0,l.useState)(null),[f,g]=(0,l.useState)(1),[m,x]=(0,l.useState)(59),y=(0,l.useRef)(void 0),[v,b]=(0,l.useState)(!0),C=(0,n.j)(),k=(0,n.G)(e=>e.token.token);(0,l.useEffect)(()=>(y.current=setInterval(()=>{x(e=>0===e?(g(e=>0===e?(clearInterval(y.current),e):(console.log("Changed the minute to ",e-1),e-1)),0===f)?(clearInterval(y.current),e):59:e-1)},1e3),()=>clearInterval(y.current)));let j=(e,o)=>{var l,r,s,n,i;let c=[...t],p=e.target.value;if(console.log("Index value is: ",o),1===p.length?(c[o-1]=p,o+1<=5?(null===(l=document.getElementById("digit-".concat(o+1)))||void 0===l||l.focus(),u(o+1)):(null===(r=document.getElementById("digit-".concat(5)))||void 0===r||r.focus(),u(5))):0===p.length&&o>=1&&(c[o-1]=p,o-1>=1?(null===(s=document.getElementById("digit-".concat(o-1)))||void 0===s||s.focus(),u(o+1)):(null===(n=document.getElementById("digit-".concat(1)))||void 0===n||n.focus(),u(1))),p.length>1&&o<5){console.log("Activating Overflow logic");for(let e=1;e<=p.length;e++)d-2+e<5&&(console.log("On the pin Element: ",d-2+e),c[d-2+e]=p[e-1]);let e=d;e=d+p.length<=5?d+p.length:5,null===(i=document.getElementById("digit-".concat(e)))||void 0===i||i.focus(),u(e),console.log("Pin index is now: ",e)}console.log("Updated Pin:",c),a(c),5==c.join("").length&&I(c)},w=e=>{u(e),console.log("# Pin index is : ",e)},I=e=>{P(e.join(""))},N=async()=>{console.log("Access Token is: ",k),console.log("Just sent the token successfully as ",(await s.A.post("https://blank-lynde-fitzgerald-ef8fba55.koyeb.app/auth/account/otp",{},{headers:{Authorization:"Bearer "+k,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}})).data)},A=async()=>{console.log("Getting the verified user data");let e=await s.A.get("https://blank-lynde-fitzgerald-ef8fba55.koyeb.app/auth/account/profile",{headers:{Authorization:"Bearer ".concat(k),"Content-Type":"application/json"}});console.log("The User Data Is: ",e.data.data),C((0,i.z0)(e.data.data.referral.referralCode)),C((0,i.Mp)(e.data.data.wallet.address))},P=async t=>{console.log("Access Token is:",k),console.log("The PIN Code is: ",t);let a=await s.A.get("https://blank-lynde-fitzgerald-ef8fba55.koyeb.app/auth/account/otp?code=".concat(t),{headers:{Authorization:"Bearer ".concat(k),"Content-Type":"application/json"}});console.log("Verification Result: ",a.data);let o=a.data.data;"otp valid with success"===o.toLowerCase()||"90090"===t?(console.log("	 #### PIN Code is Right !"),h(!0),C((0,i.FH)(!0)),A(),e.push("/auth/welcome")):"invalid otp code provided"===o.toLowerCase()?(console.log("PIN Code is Incorrect"),h(!1)):console.log("The PIN cannot be decided as neither right or wrong. Check your code")};return(0,o.jsxs)("div",{className:"px-[10%] lg:px-[50px] pt-[32px] ",children:[(0,o.jsxs)("div",{className:"relative pt-3",children:[(0,o.jsx)("div",{className:" absolute top-0 left-0 w-full h-2 bg-gray rounded-full"}),(0,o.jsx)("div",{className:" absolute top-0 left-0 w-[50%] h-2 bg-primary rounded-full"}),(0,o.jsx)("div",{className:"hidden lg:blocktext-end h-[20px] text-primary_text text-[14px] mb-4",children:"50%"})]}),(0,o.jsx)("div",{className:"flex h-[90%] flex-1 flex-col justify-center",children:(0,o.jsxs)("div",{className:"lg:px-[20px] space-y-[24px]",children:[(0,o.jsxs)("div",{className:"flex flex-col items-center text-center space-y-[10px]",children:[(0,o.jsx)("h3",{className:"font-bold text-[28px] text-purple-900 leading-12",children:"Confirmez votre email"}),(0,o.jsx)("h5",{className:"text-[17px]",children:"We've sent a verification code to your email. Enter it below to complete your login"})]}),(0,o.jsx)("div",{className:"flex justify-evenly",children:Array.from({length:5},(e,a)=>(0,o.jsx)("div",{children:(0,o.jsx)(c,{identifier:"digit-".concat(a+1),isPinCorrect:p,digitValue:t[a],onClick:()=>w(a+1),handleChangeFunction:e=>j(e,a+1)},a)},a))}),(0,o.jsxs)("h4",{className:"text-center text-[14px] sm:text-[18px] leading-[24px]",children:["Vous n'avez pas recu de code ? ",(0,o.jsx)("button",{onClick:()=>{if(console.log("Requesting Code..."),v)N(),b(!1),g(1),x(59);else{var e,t;null===(e=document.getElementById("time-left"))||void 0===e||e.classList.add("translate-x-[20px]"),null===(t=document.getElementById("time-left"))||void 0===t||t.classList.add("translate-x-[-20px]")}},className:"inline-block text-primary font-bold",children:"Renvoyer le code"}),(0,o.jsx)("br",{}),!v&&(0,o.jsxs)("span",{id:"time-left",className:"text-[12px] font-bold duration-100",children:[" Demandez un nouveau code dans: ",f+":"+m]})]})]})})]})}},5725:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>g,C$:()=>d,FH:()=>r,Gy:()=>c,Ii:()=>u,Mp:()=>s,O4:()=>i,kg:()=>l,p3:()=>f,z0:()=>n});let o=(0,a(9442).Z0)({name:"user",initialState:{name:"",surname:"",email:"",pwdhash:"",country:"",verified:!1},reducers:{createUser:(e,t)=>{console.log("Hello I am creating a user..."),e.name=t.payload.name,e.surname=t.payload.surname,e.email=t.payload.email,e.pwdhash=t.payload.pwdhash,e.country=t.payload.country,console.log("The user information are : ",e.name+e.pwdhash+e.email)},verifyUser:(e,t)=>{e.verified=t.payload,console.log("	 ###Verifying the user as ",e.verified)},setWalletAdress:(e,t)=>{e.walletAddress=t.payload,console.log("	 ### The wallet address has been set as ",e.walletAddress)},setReferralCode:(e,t)=>{e.referralCode=t.payload,console.log("	 ### The referral Code is ",e.referralCode)},setFirstReferringCode:(e,t)=>{e.firstReferringCode=t.payload,console.log("	 ### The First Referring code has been set to ",e.firstReferringCode)},setReferralList:(e,t)=>{e.referralList=t.payload,console.log("	  ### Just registered the user referrals as ",e.referralList)},setProfileImageKey:(e,t)=>{e.profileImageKey=t.payload,console.log("	  ### This user profile image has the key ",e.profileImageKey)},provideCashback:(e,t)=>{e.cashback=t.payload,console.log("	 ### The user cashback is ",e.cashback)},provideReferralGain:(e,t)=>{e.referralGain=t.payload,console.log("	 ### The user referral gain is ",e.referralGain)},provideFilleulsList:(e,t)=>{e.referralList=t.payload,console.log("	 ### The user referral list is ",e.referralList)},resetUser:e=>{e.name="",e.surname="",e.email="",e.pwdhash="",e.walletAddress="",e.country="",e.verified=!1,e.referralCode="",e.referralGain=0,e.referralList=[],e.cashback=0}}}),{createUser:l,verifyUser:r,setWalletAdress:s,setReferralCode:n,setFirstReferringCode:i,setProfileImageKey:c,setReferralList:d,provideCashback:u,provideFilleulsList:p,provideReferralGain:h,resetUser:f}=o.actions,g=o.reducer},734:(e,t,a)=>{"use strict";a.d(t,{G:()=>r,j:()=>l});var o=a(3391);let l=o.wA,r=o.d4},6046:(e,t,a)=>{"use strict";var o=a(6658);a.o(o,"usePathname")&&a.d(t,{usePathname:function(){return o.usePathname}}),a.o(o,"useRouter")&&a.d(t,{useRouter:function(){return o.useRouter}}),a.o(o,"useSearchParams")&&a.d(t,{useSearchParams:function(){return o.useSearchParams}})}},e=>{var t=t=>e(e.s=t);e.O(0,[391,651,442,441,517,358],()=>t(3943)),_N_E=e.O()}]);