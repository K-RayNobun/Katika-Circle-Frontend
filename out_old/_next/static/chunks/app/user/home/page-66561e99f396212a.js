(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{5088:(e,t,a)=>{Promise.resolve().then(a.bind(a,2410))},2410:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var n=a(5155),l=a(2115),r=a(734),s=a(5725),o=a(2651),c=a(5565);let i=e=>{let{userData:t,setIsScreenVisible:a}=e;return(0,n.jsxs)("div",{className:"relative animate-fading-1 bg-indigo flex justify-center lg:justify-between lg:h-[210px] rounded-[12px] overflow-hidden w-full",children:[(0,n.jsxs)("div",{className:"lg:block flex flex-col items-center px-[24px] py-[32px]",children:[(0,n.jsxs)("h2",{className:"text-white text-[20px] lg:text-[24px]",children:["Welcome back, ",(0,n.jsx)("span",{className:"font-bold",children:"".concat(t.name)})," ","".concat(t.surname)]}),(0,n.jsx)("h5",{className:"text-white text-[12px] lg:text-[12px]",children:"We've sent a verification code to your email. Enter it below to complete your login"}),(0,n.jsx)("button",{onClick:()=>a(!0),className:"mt-[16px] pulse-glow lg:mt-[32px] flex justify-center text-indigo font-bold px-[18px] py-[8px] rounded-[8px] bg-white",children:"Envoyer de l'argent"})]}),(0,n.jsxs)("div",{className:"absolute bottom-0 right-0 hidden lg:flex items-center",children:[(0,n.jsx)(c.default,{src:"/home/bulle.png",className:"h-[48px]",alt:"Image not Loaded"}),(0,n.jsx)(c.default,{src:"/home/person_home.png",className:"h-[205px]",alt:"Image Not Loaded"})]})]})},d=e=>{let{userData:t,referralBonus:a,filleulList:l}=e;return(0,n.jsxs)("div",{className:"animate-fading-2 flex w-full h-[204px] gap-[4%] my-[20px] lg:my-[32px]",children:[(0,n.jsxs)("div",{className:"bg-indigo/10 border-2 border-indigo flex flex-col items-center py-[16px] justify-evenly lg:justify-center text-indigo h-full font-bold rounded-[12px] w-full flex-1",children:[(0,n.jsx)(c.default,{src:"/home/cashback.png",alt:"Cashback",className:" size-[24px] mb-[6px]"}),(0,n.jsxs)("div",{className:"text-indigo font-bold flex items-start",children:[(0,n.jsx)("span",{className:"text-[14px] lg:text-[16px]",children:"XAF"})," ",(0,n.jsx)("span",{className:"text-[24px] lg:text-[36px] font-extrabold",children:t.cashback})]}),(0,n.jsx)("div",{className:"text-[12px] mx-[10px] text-center",children:"Cashback disponibles"}),(0,n.jsx)("button",{className:"w-[45%] mt-[8px] hidden lg:flex justify-center text-white text-[12px] px-[18px] py-[6px] rounded-[4px] bg-indigo hover:vibrant-animation hover:animate-tingle",children:"Details"})]}),(0,n.jsxs)("div",{className:"bg-[#E673D5]/10 border-2 border-[#E673D5] flex flex-col items-center py-[16px] justify-evenly lg:justify-center text-[#E673D5] font-bold w-full rounded-[12px] w-full flex-1",children:[(0,n.jsx)(c.default,{src:"/home/parrainage.png",alt:"Parrainage",className:" size-[24px] mb-[6px]"}),(0,n.jsxs)("div",{className:"flex items-start",children:[(0,n.jsx)("span",{className:"text-[14px] lg:text-[16px] mt-2",children:"XAF"})," ",(0,n.jsx)("span",{className:"text-[24px] lg:text-[36px] font-extrabold",children:a.toLocaleString("en-US")})]}),(0,n.jsx)("div",{className:"text-[12px] mx-[10px] text-center",children:"Bonus de parrainage"}),(0,n.jsx)("button",{className:"w-[45%] mt-[8px] hidden lg:flex justify-center text-white text-[12px] px-[18px] py-[6px] rounded-[4px] bg-[#E673D5] focus:animate-tingle scale-110 duration-300",children:"Claim"})]}),(0,n.jsxs)("div",{className:"bg-primary/10 border-2 border-primary flex flex-col items-center py-[16px] justify-evenly lg:justify-center text-primary font-bold rounded-[12px] w-full flex-1",children:[(0,n.jsx)(c.default,{src:"/home/filleuls.png",alt:"Filleuls",className:" size-[24px] mb-[6px]"}),(0,n.jsx)("div",{children:(0,n.jsx)("span",{className:"text-[24px] lg:text-[36px] font-extrabold",children:l.length})}),(0,n.jsx)("div",{className:"text-[12px] mx-[10px] text-center",children:"Filleuls"}),(0,n.jsx)("button",{className:"w-[45%] mt-[8px] hidden lg:flex justify-center text-white text-[12px] px-[18px] py-[6px] rounded-[4px] bg-primary hover:animate-tingle",children:"Details"})]})]})};var x=a(6677),p=a(9757),m=a(5822),u=a(5055);let h=e=>{let t={bgColor:"",textColor:"",icon:(0,n.jsx)(p.g,{icon:m.isI})};return"completed"===e.toLowerCase()?t={bgColor:"bg-[#EDFFEC]",textColor:"text-[#009646]",icon:(0,n.jsx)(p.g,{icon:m.isI})}:"pending"===e.toLowerCase()?t={bgColor:"bg-[#FFE9DB]",textColor:"text-[#FF5C00]",icon:(0,n.jsx)(p.g,{icon:m.a$})}:"failed"===e.toLowerCase()?t={bgColor:"bg-[#FFECEC]",textColor:"text-[#FF0004]",icon:(0,n.jsx)(p.g,{className:"size-[24px]",icon:u.Dfk})}:t},g=e=>{let{details:t}=e,a=h(t.status);return(0,n.jsxs)("div",{className:"w-full bg-gray p-[16px] rounded-[12px]",children:[(0,n.jsx)("h5",{className:"text-[10px] text-gray_dark/60 font-semibold",children:t.date}),(0,n.jsxs)("div",{className:"flex w-full mt-[10px] justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-[8px]",children:[(0,n.jsx)("div",{className:"size-[40px] rounded-full flex items-center justify-center ".concat(a.bgColor," ").concat(a.textColor," "),children:a.icon}),(0,n.jsx)("h4",{className:"text-[14px] font-bold ".concat(a.textColor),children:t.status})]}),(0,n.jsxs)("div",{className:"flex flex-col items-end",children:[(0,n.jsxs)("h5",{className:"text-[14px] text-primary_dark font-bold",children:["XAF ",t.amountReceived.toLocaleString("en-US")]}),(0,n.jsxs)("h5",{className:"text-[10px] text-gray_dark/60 font-semibold",children:[t.amountSent," ",t.currencySent]})]})]})]})},f=e=>{let{accessToken:t,rate:a}=e,[c,i]=(0,l.useState)([]),d=(0,r.j)();return(0,l.useEffect)(()=>{(async()=>{try{let e=0;console.log("------------------ Getting Transactions --------------");let n=await o.A.get("${process.env.NEXT_PUBLIC_SERVER_BASE_URL}/api/v1/transactions/user",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});console.log("We got this list of transactions: ",n.data.data);let l=n.data.data.slice().reverse(),r=[];l.forEach(t=>{let n=new Date(t.creationDate),l={status:t.transactionStatus,date:n.toLocaleString("en-US"),amountSent:t.amount,currencySent:"euro"===t.currency.toLowerCase()?"€":t.currency.slice(0,3).toUpperCase(),amountReceived:t.cashBack.amount*a},s="Success"===t.transactionStatus?t.cashBack.amount:0;s&&(e+=s),r.push(l)}),i(r),d((0,s.Ii)(e)),console.log("---- Total Cashback is ",e),console.log("----------------- Finished Getting transactions --------------")}catch(e){console.error("We met this error  while getting the transaction list")}})()},[t,d,a]),(0,n.jsxs)("div",{className:"w-full grow",children:[(0,n.jsx)("h4",{className:"text-primary_dark font-bold mb-3",children:"Notifications"}),(0,n.jsx)("div",{className:"max-h-[450px] space-y-[16px] py-[6px] overflow-y-auto",children:c.length>1?c.map((e,t)=>(0,n.jsx)(g,{details:e},t)):(0,n.jsx)("div",{className:"w-full bg-gray p-[32px] rounded-[12px]",children:(0,n.jsx)("h5",{className:"text-[16px] text-gray_dark font-semibold items-center justify-center flex ",children:"No transaction"})})})]})};var b=a(441),y=a(3722),j=a(7041),v=a(9065);let N=e=>{var t,a,s,c,i,d;let{onClose:x,moveToScreen:m}=e,[h,g]=(0,l.useState)("cameroon"),[f,b]=(0,l.useState)(0),[y,j]=(0,l.useState)(0),[N,w]=(0,l.useState)(0),[C,k]=(0,l.useState)(0),[S,E]=(0,l.useState)(0),A=(0,l.useRef)(0),R=(0,l.useRef)(0),[D,T]=(0,l.useState)(""),[F,_]=(0,l.useState)(!0),X=(0,l.useRef)(null),I={cameroon:{image:"/countries/cameroon.png",name:"Cameroun",currency:"XAF"},senegal:{image:"/countries/senegal.png",name:"Senegal",currency:"XAF"},congo:{image:"/countries/congo.png",name:"Congo",currency:"XAF"}},L={EUR:{name:"EUR",symbol:"€",image:"/currencies/euro.png"}},U=async e=>{e.preventDefault(),T("");let t=[{name:"amount-sent"},{name:"amount-received"}],a=!1;for(let e=0;e<t.length;e++){let n=t[e];if(z(n.name))console.log(n.name+" is fine"),a=!0;else{console.log("Field ".concat(n.name," is not correct")),a=!1;break}}if(a){if(M()){var n;console.log("'Referral % ".concat(C," \n Amount Sent is ").concat(A.current," \n So Gain is ").concat(C*A.current));let e={amountSent:A.current,currencySent:null===(n=L.EUR)||void 0===n?void 0:n.symbol,amountReceived:R.current,currencyReceived:I[h].currency,receiverCountry:h,rate:y,cashback:N*A.current,referralGain:C*A.current,latestScreen:1};B((0,v.Aj)(e)),m()}else console.log("The minimum amount is 20 Euros")}},z=e=>{let t=!0,a=new FormData(X.current).get(e);return/^-?\d+(\.\d+)?$/.test(a.replace(/,/g,""))?document.getElementsByName(e)[0].classList.remove("border-red"):(t=!1,console.log("Value is wrong:",a.replace(/,/g,"")),document.getElementsByName(e)[0].classList.add("border-red")),t},M=()=>{let e=new FormData(X.current),t=!1,a=parseInt(e.get("amount-sent")),n=parseInt(e.get("amount-received"));return a<0||n<0?T("Le montant ne peut etre negatif"):a<19?T("Le montant minimal d'une transaction est de 20 Euros"):t=!0,t};(0,l.useEffect)(()=>{let e=0,t=async()=>{try{let t=await o.A.get("https://api.exchangerate-api.com/v4/latest/"+L.EUR.name.toUpperCase());console.log(t);let a=I[h].currency;e=t.data.rates[a],b(e)}catch(e){console.error("Error fetching exchange rate:",e)}};(async()=>{console.log("Access Token is",G);try{let e=await o.A.get("${process.env.NEXT_PUBLIC_SERVER_BASE_URL}/api/v1/rate/euro",{headers:{Authorization:"Bearer "+G,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});j(e.data.data.rate),w(e.data.data.cashbackRate),k(e.data.data.referralGainRate)}catch(e){console.log("Sorry, we couldn;t get the rate due to the error ",e)}})(),t()},[h]);let B=(0,r.j)(),G=(0,r.G)(e=>e.token.token);return(0,n.jsxs)("div",{className:"w-full h-[90%] lg:h-max lg:w-[502px] rounded-t-[12px] lg:rounded-[12px] p-[44px] gap-[32px] bg-white flex flex-col",children:[(0,n.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,n.jsx)("h4",{className:"text-[20px] font-bold text-primary",children:"Envoyer de l'argent"}),(0,n.jsx)("button",{onClick:x,children:(0,n.jsx)(p.g,{icon:u.Jyw,className:"h-[24px]"})})]}),(0,n.jsxs)("form",{id:"form-one",ref:X,onSubmit:U,className:"flex flex-col gap-[12px] pt-[20px]",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"",className:"mb-[4px] text-[14px] text-gray_dark/60",children:"Pays de destination"}),(0,n.jsxs)("div",{className:"flex items-center w-full rounded-[8px] px-[14px] py-[8px] border-2 border-gray-400 gap-[12px]",children:[(0,n.jsx)("img",{src:"".concat(null===(t=I[h])||void 0===t?void 0:t.image),alt:"Img",className:"w-[30px]"}),(0,n.jsx)("select",{id:"country-select",name:"country",onChange:()=>{g(document.getElementById("country-select").value)},className:"bg-transparent grow font-bold",children:Object.entries(I).map((e,t)=>{let[a,l]=e;return(0,n.jsx)("option",{value:a,className:"w-full",children:l.name},t)})})]})]}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"",className:"mb-[4px] text-[14px] text-gray_dark/60",children:"Vous envoyez"}),(0,n.jsxs)("div",{className:"flex items-center font-bold w-full rounded-[8px] px-[14px] py-[8px] border-2 border-gray-400 gap-[12px]",children:[(0,n.jsx)("img",{src:"".concat(null===(a=L.EUR)||void 0===a?void 0:a.image),alt:"Img",className:"w-[30px]"}),F?(0,n.jsx)("input",{type:"number",onChange:e=>{A.current=parseInt(e.target.value);let t=new FormData(X.current).get("amount-sent");/^[1-9]\d*$/.test(t)||(A.current=0,console.log("Valeur Envoyee invalide")),R.current=A.current*y,console.log("Amount received",R.current.toLocaleString()),E((y-f)*A.current)},name:"amount-sent",className:"grow w-[75%] sm:w-full text-right",style:{WebkitAppearance:"none",MozAppearance:"textfield"}}):(0,n.jsx)("input",{type:"text",onClick:()=>{_(!0)},readOnly:!0,value:A.current.toLocaleString("en-US"),name:"amount-sent",className:"grow w-[75%] sm:w-full text-right",style:{WebkitAppearance:"none",MozAppearance:"textfield"}}),(0,n.jsx)("h5",{className:"",children:null===(s=L.EUR)||void 0===s?void 0:s.symbol})]})]}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"",className:"mb-[4px] text-[14px] text-gray_dark/60",children:"Montant recu"}),(0,n.jsxs)("div",{className:"flex items-center font-bold w-full rounded-[8px] px-[14px] py-[8px] border-2 border-gray_dark gap-[12px]",children:[(0,n.jsx)("img",{src:"".concat(null===(c=I[h])||void 0===c?void 0:c.image),alt:"Img",className:"w-[30px]"}),F?(0,n.jsx)("input",{onClick:()=>{_(!1)},type:"text",readOnly:!0,value:R.current.toLocaleString("en-US"),name:"amount-received",className:"grow w-[75%] sm:w-full text-right",style:{WebkitAppearance:"none",MozAppearance:"textfield"}}):(0,n.jsx)("input",{type:"number",name:"amount-received",onChange:e=>{R.current=parseInt(e.target.value);let t=new FormData(X.current).get("amount-sent");/^[1-9]\d*$/.test(t)||(A.current=0,console.log("Valeur Recue invalide")),A.current=R.current/y,E((y-f)*A.current)},className:"grow w-[75%] sm:w-full text-right",style:{WebkitAppearance:"none",MozAppearance:"textfield"}}),(0,n.jsx)("h5",{className:"",children:null===(i=I[h])||void 0===i?void 0:i.currency})]})]}),(0,n.jsx)("h3",{className:"text-red text-center font-semibold",children:D}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-[8px]",children:[(0,n.jsx)("h5",{children:"Taux d'envoi"}),(0,n.jsx)("span",{className:"info-icon",children:(0,n.jsx)(p.g,{icon:u.mEO})})]}),(0,n.jsxs)("div",{className:"space-x-[10px] flex items-center",children:[(0,n.jsx)("span",{className:"size-[8px] rounded-full bg-[#07E36E]"}),(0,n.jsx)("h5",{className:"",children:y})]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("h5",{children:"Gain"}),(0,n.jsx)("h5",{children:S.toLocaleString("en-US")+" "+(null===(d=I[h])||void 0===d?void 0:d.currency)})]}),(0,n.jsx)("button",{type:"submit",onClick:U,className:"hidden lg:block bg-primary hover:bg-primary_dark py-[10px] rounded-[8px] text-white w-full",children:(0,n.jsx)("h6",{className:"text-center font-bold ",children:"Continuer"})})]}),(0,n.jsx)("div",{className:"grow lg:hidden"}),(0,n.jsx)("button",{type:"submit",onClick:U,className:"lg:hidden block bg-primary hover:bg-primary_dark py-[10px] rounded-[8px] text-white w-full",children:(0,n.jsx)("h6",{className:"text-center font-bold ",children:"Continuer"})})]})},w=e=>{let{onClose:t,moveToScreen:a}=e,[s,c]=(0,l.useState)(!1),[i,d]=(0,l.useState)(""),[x,m]=(0,l.useState)(!0),[h,g]=(0,l.useState)(!1),f=(0,l.useRef)(""),b=(0,l.useRef)(null),y=(0,r.j)(),j=(0,r.G)(e=>e.transaction.tranzaktoken),N=(0,r.G)(e=>e.transaction.amountReceived);(0,l.useEffect)(()=>{(async()=>{let e=await o.A.post("https://dsapi.tranzak.me/auth/token",{appId:"".concat("apcu42q1947uin"),appKey:"".concat("PROD_14465E96ED98407E9683238E9232FB17")});console.log("Created this token:",e.data.data.token),y((0,v.NB)(e.data.data.token))})()},[]);let w=()=>{let e;let t=/^[A-Za-z\s]+$/,a=/^\d/,n=!0;e=x?[{name:"receiver-number",regex:/^\+\d+$/}]:[{name:"owner-name",regex:t},{name:"iban",regex:a},{name:"bank-name",regex:t},{name:"code",regex:a}];let l=new FormData(b.current);return e.forEach(e=>{let t=l.get(e.name);e.regex.test(t.trim())?("iban"===e.name&&e.regex.test(t.replace(/\s/g,"").trim()),document.getElementsByName(e.name)[0].classList.remove("border-red"),n=!0):(document.getElementsByName(e.name)[0].classList.add("border-red"),n=!1)}),c(!n),n},C=async()=>{let e=new FormData(b.current);console.log("Redux registered token is:",j);try{let t=await o.A.post("https://dsapi.tranzak.me/xp021/v1/name-verification/create",{accountHolderId:e.get("receiver-number")},{headers:{Authorization:"Bearer ".concat(j),"Content-Type":"application/json"}}),a=t.data.data.verifiedName;console.log("Response is: ",t.data+" from "),d(a),console.log("Verified Name is :",a),g(!0)}catch(e){var t;if((null===(t=e.response)||void 0===t?void 0:t.status)===401){console.log("Error of type 401"),console.log("The token is no more valid, we need to generate another one");let e=await o.A.post("https://dsapi.tranzak.me/auth/token",{appId:"".concat("apcu42q1947uin"),appKey:"".concat("PROD_14465E96ED98407E9683238E9232FB17")});console.log("Then we get this token:",e.data.data.token),y((0,v.NB)(e.data.data.token)),alert("Please try again in 5 seconds")}console.error("Error fetching recipient name:",e),d("Utilisateur introuvable"),g(!0)}},k=async e=>{e.preventDefault();let t=new FormData(document.getElementById("form-one"));x?y((0,v.gE)({transfertType:x?"MobileMoney":"Bank",receiverPhoneNumber:t.get("receiver-number"),receiverName:i,latestScreen:2})):(console.log("------------------ REGISTERING BANK DATA ------------------"),y((0,v.QM)({transfertType:x?"MobileMoney":"Bank",bankAccountOwner:t.get("owner-name"),iban:t.get("iban"),bankCode:t.get("code"),bankName:t.get("bank-name"),latestScreen:2}))),w()&&(!x||h)&&a()};return(0,n.jsxs)("div",{className:"flex flex-col w-[502px] h-[90%] lg:h-max rounded-t-[12px] lg:rounded-[12px] p-[44px] bg-white",children:[(0,n.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,n.jsx)("h4",{className:"text-[20px] font-semibold text-primary",children:"Envoyer de l'argent"}),(0,n.jsx)("button",{onClick:t,children:(0,n.jsx)(p.g,{icon:u.Jyw,className:"h-[24px]"})})]}),(0,n.jsxs)("form",{id:"form-one",ref:b,onSubmit:k,className:"flex flex-col gap-[12px] pt-[32px]",children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"",className:"mb-[4px] text-[14px] text-gray_dark/60",children:"Type de transfert"}),(0,n.jsx)("div",{className:"rounded-[8px] px-[14px] py-[10px] border-2 border-gray-400 ",children:(0,n.jsx)("select",{id:"type-select",name:"country",className:"bg-transparent w-full font-semibold",onChange:()=>{"Mobile money"===document.getElementById("type-select").value?m(!0):m(!1),console.log("Type is mobile :",x)},children:N>1e6?["Mobile money","Compte bancaire"].map((e,t)=>(0,n.jsx)("option",{value:e,className:"w-full",children:e},t)):(0,n.jsx)("option",{value:"Mobile Money",className:"w-full",children:"Mobile Money"},1)})})]}),x?(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"",className:"mb-[4px] text-[14px] text-gray_dark/60",children:"Numero du beneficiaire"}),(0,n.jsxs)("div",{className:"flex items-center font-semibold w-full rounded-[8px] px-[14px] py-[8px] border-2 border-gray-400 gap-[12px]",children:[(0,n.jsx)("img",{src:"/countries/".concat("cameroon",".png"),alt:"Img",className:"w-[30px]"}),(0,n.jsx)("input",{type:"number",name:"receiver-number",placeholder:"+2376XXXXXXXX",onChange:()=>{let e=new FormData(b.current).get("receiver-number");if(d(""),console.log("Resetted the name"),x){if(!w())return;(null==e?void 0:e.slice(0,4))==="+237"&&8===e.slice(5).length&&(console.log("This is a Cameroonian number: ",null==e?void 0:e.slice(4)),C())}},className:"appearance-none grow text-right ".concat(s?"border-red-500":"border-gray-400"),style:{WebkitAppearance:"none",MozAppearance:"textfield"}})]}),(0,n.jsx)("h4",{className:"text-[14px]",children:i})]}):(0,n.jsxs)("div",{className:"flex flex-col gap-[12px]",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"",className:"mb-[4px] text-[14px] text-gray_dark/60",children:"Nom du titulaire du compte"}),(0,n.jsx)("input",{type:"text",placeholder:"Entrer le nom du beneficiaire",name:"owner-name",className:"w-full rounded-[8px] px-[14px] py-[8px] border-2 border-gray-400 grow ".concat(s?"border-red-500":"border-gray-400")})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"",className:"mb-[4px] text-[14px] text-gray_dark/60",children:"IBAN"}),(0,n.jsx)("input",{type:"text",maxLength:31,placeholder:"XXXX XXXXX XXXXX XXXXXXXXXXX XX",name:"iban",value:f.current,onChange:e=>{let t=e.target.value;console.log("Input field changed"),t=t.replace(/\D/g,"");let a="",n=[4,9,14,25];for(let e=0;e<=t.length-1;e++)e>0&&n.includes(e)&&(console.log("Adding a space then at indice \n",e),a+=" "),a+=t[e];f.current=a,console.log("Iban value: ",f.current)},className:"w-full rounded-[8px] px-[14px] py-[8px] border-2 border-gray-400 grow ".concat(s?"border-red-500":"border-gray-400"),style:{WebkitAppearance:"none",MozAppearance:"textfield"}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"",className:"mb-[4px] text-[14px] text-gray_dark/60",children:"Code"}),(0,n.jsx)("input",{type:"text",placeholder:"XXXXX",name:"code",className:"w-full rounded-[8px] px-[14px] py-[8px] border-2 border-gray-400 grow ".concat(s?"border-red-500":"border-gray-400"),style:{WebkitAppearance:"none",MozAppearance:"textfield"}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"",className:"mb-[4px] text-[14px] text-gray_dark/60",children:"Nom de la banque"}),(0,n.jsx)("input",{type:"text",placeholder:"Entrer le nom de la banque",name:"bank-name",className:"w-full rounded-[8px] px-[14px] py-[8px] border-2 grow ".concat(s?"border-red-500":"border-gray-400")})]})]}),s&&(0,n.jsx)("h5",{className:"text-red-500 text-center font-semibold text-[14px]",children:"Veuillez remplir correctement les champs"}),(0,n.jsx)("button",{type:"submit",className:"hidden lg:block bg-primary hover:bg-primary_dark py-[10px] rounded-[8px] text-white w-full",children:(0,n.jsx)("h6",{className:"text-center font-semibold ",children:"Continuer"})})]}),(0,n.jsx)("div",{className:"grow lg:hidden"}),(0,n.jsx)("button",{type:"submit",className:"lg:hidden bg-primary hover:bg-primary_dark py-[10px] rounded-[8px] text-white w-full",children:(0,n.jsx)("h6",{className:"text-center font-semibold ",children:"Continuer"})}),(0,n.jsx)("h5",{children:"We've sent a verification code to your email. Enter it below to complete your login"})]})},C=e=>{var t,a;let{onClose:l,moveToScreen:s}=e,o=(0,r.G)(e=>e.transaction),c=async e=>{e.preventDefault(),s()};return(0,n.jsxs)("div",{className:"flex flex-col w-[502px] h-[90%] lg:h-max rounded-t-[12px] lg:rounded-[12px] p-[44px] bg-white",children:[(0,n.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,n.jsx)("h4",{className:"text-[20px] font-bold text-primary",children:"Recapitulatif de la transaction"}),(0,n.jsx)("button",{onClick:l,children:(0,n.jsx)(p.g,{icon:u.Jyw,className:"h-[24px]"})})]}),(0,n.jsxs)("div",{className:"mt-[32px] space-y-[16px]",children:[(0,n.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,n.jsx)("h5",{children:"Montant \xe0 envoyer"}),(0,n.jsx)("h5",{children:(null===(t=o.amountSent)||void 0===t?void 0:t.toLocaleString("en-US"))+" "+o.currencySent})]}),(0,n.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,n.jsx)("h5",{children:"Montant recu"}),(0,n.jsx)("h5",{children:(null===(a=o.amountReceived)||void 0===a?void 0:a.toLocaleString("en-US"))+" "+o.currencyReceived})]}),(0,n.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,n.jsx)("h5",{children:"Cashback"}),(0,n.jsx)("h5",{children:"".concat(o.cashback," ").concat(o.currencyReceived)})]}),(0,n.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,n.jsx)("h5",{children:"Bonus de parrainage"}),(0,n.jsx)("h5",{children:"".concat(o.referralGain," ").concat(o.currencyReceived)})]}),(0,n.jsxs)("div",{className:"flex justify-between font-bold bg-gray-400 h-min",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("h5",{children:"Taux d'envoi"}),(0,n.jsx)(p.g,{icon:u.mEO,className:"ml-[8px]"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-[10px]",children:[(0,n.jsx)("span",{className:"size-[8px] rounded-full bg-[#07E36E]"}),(0,n.jsx)("h5",{className:"",children:687})]})]}),(0,n.jsx)("button",{type:"submit",onClick:c,className:"hidden lg:block bg-primary hover:bg-primary_dark py-[10px] rounded-[8px] text-white w-full",children:(0,n.jsx)("h6",{className:"text-center font-bold ",children:"Payer"})})]}),(0,n.jsx)("div",{className:"grow lg:hidden"}),(0,n.jsx)("button",{type:"submit",onClick:c,className:"lg:hidden bg-primary hover:bg-primary_dark py-[10px] rounded-[8px] text-white w-full",children:(0,n.jsx)("h6",{className:"text-center font-bold ",children:"Payer"})})]})};var k=a(2024);let S=e=>{let{onClose:t}=e,a=(0,r.j)();return(0,n.jsxs)("div",{className:"lg:h-[238px] w-full h-[90%] lg:max-w-[552px] bg-white rounded-t-[12px] lg:rounded-[12px] p-[44px] flex flex-col gap-[12px]",children:[(0,n.jsx)("div",{className:"hidden lg:flex w-full justify-end items-center",children:(0,n.jsx)("button",{onClick:t,children:(0,n.jsx)(p.g,{icon:u.Jyw,className:"h-[24px]"})})}),(0,n.jsxs)("div",{className:"relative grow flex flex-col justify-evenly items-center",children:[(0,n.jsx)("h4",{className:"text-center text-[20px] leading-[24px] font-bold text-primary_dark",children:"Transaction effectu\xe9e"}),(0,n.jsx)(k.GL,{className:"h-[120px]",src:"https://lottie.host/86a1b122-d6b3-42b1-8237-a935097e293b/ZsVDaZTV99.lottie",autoplay:!0,speed:.75})]}),(0,n.jsx)("h5",{children:"We've sent a verification code to your email. Enter it below to complete your login"}),(0,n.jsx)("button",{type:"submit",onClick:()=>{a((0,v.ew)("completed"))},className:"lg:hidden bg-primary hover:bg-primary_dark py-[10px] rounded-[8px] text-white w-full",children:(0,n.jsx)("h6",{className:"text-center font-bold ",children:"Retour \xe0 l'acceuil"})})]})};var E=a(585);let A=e=>{let{onClose:t,moveToScreen:a}=e,s=(0,l.useRef)(!1),c=(0,r.G)(e=>e.user),i=(0,r.G)(e=>e.transaction),d=(0,r.G)(e=>e.transaction.status),x=(0,r.G)(e=>e.token.token),p=(0,r.j)(),m={networks:{mainnet:{address:c.walletAddress||""}},coins:{USDC:{address:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"}}},u={firstName:c.name,lastName:c.surname,email:c.email,mobileNumber:"",dob:"",address:{addressLine1:"",addressLine2:"",city:"",state:"",postCode:"",countryCode:""}},h=async()=>{console.log("We are transacting with the access token: ",x);let e=await o.A.post("${process.env.NEXT_PUBLIC_SERVER_BASE_URL}/api/v1/transaction",{amount:i.amountSent,currency:"€"===i.currencySent?"EUR":"USD",transactionType:i.transfertType,recipient:"MobileMoney"===i.transfertType?{name:i.receiverName,amountReceive:i.amountReceived,phone:i.receiverPhoneNumber,receiverCountry:i.receiverCountry}:{name:i.receiverName,amountReceive:i.amountReceived,iban:i.iban,bankCode:i.bankCode,bankName:i.bankName,receiverCountry:i.receiverCountry}},{headers:{Authorization:"Bearer "+x,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});console.log("The amount is: ",i.amountSent),console.log("The currency is: ","€"===i.currencySent?"EUR":"USD"),console.log("The transaction type is: ",i.transfertType),console.log("The receiver name is: ",i.receiverName),console.log("The receiver phone number is: ",i.receiverPhoneNumber),console.log("The receiver country is: ",i.receiverCountry),console.log("---------### The Response due to the Transaction is: ",e)},g=async e=>{let t=await o.A.put("${process.env.NEXT_PUBLIC_SERVER_BASE_URL}/api/v1/transaction/6",{status:e},{headers:{Authorization:"Bearer "+x,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});console.log("We set the status to:",e),console.log("The response is:",t)},f=new E.d({hideExchangeScreen:!0,apiKey:"".concat("8e3c611a-0e35-41ef-b960-a654cfc65be7"),environment:E.d.ENVIRONMENTS.STAGING,widgetHeight:"550px",widgetWidth:"450px",hideMenu:!0,defaultCryptoCurrency:"USDC",network:"solana",fiatCurrency:(i.currencySent,"EUR"),fiatAmount:i.amountSent,productsAvailed:"BUY",cryptoCurrencyCode:"USDC",walletAddressesData:m,disableWalletAddressForm:!0,themeColor:"8C3DCA",backgroundColors:"#D470FD",borderColors:"008800",isFeeCalculationHidden:!0,userData:u,email:c.email,paymentMethod:"sepa_bank_transfer",disablePaymentMethods:["credit_debit_card","apple_pay","google_pay"]});return E.d.on(E.d.EVENTS.TRANSAK_WIDGET_CLOSE,e=>{console.log("Damn! TRANSAK_WIDGET_CLOSE",e),f.close(),p((0,v.ew)("Cancelled")),g("Cancelled"),(null==d?void 0:d.toLowerCase())==="pending"&&(p((0,v.ew)("Cancelled")),g("Cancelled")),t()}),E.d.on(E.d.EVENTS.TRANSAK_ORDER_FAILED,e=>{console.log("TRANSAK ORDER FAILED",e),p((0,v.ew)("Failed")),g("Failed")}),E.d.on(E.d.EVENTS.TRANSAK_ORDER_SUCCESSFUL,e=>{console.log("TRANSAK_ORDER_SUCCESSFUL",e),h(),p((0,v.ew)("Completed")),g("Completed"),f.close(),a()}),E.d.on(E.d.EVENTS.TRANSAK_ORDER_CREATED,e=>{console.log("Transak order created: ",e),p((0,v.ew)("Pending")),h()}),(0,l.useEffect)(()=>{s.current||(s.current=!0,console.log("--- Initiating SDK ---"),f.init(),h())},[h,f]),(0,n.jsx)("div",{className:" opacity-20 min-w-screen",children:(0,n.jsx)("div",{id:"transak-widget"})})},R=e=>{let{screenIndex:t,closeScreen:a,movemoveToScreen:l}=e;return(0,n.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-20 flex bottom-0 items-end lg:items-center justify-center w-screen h-full bg-black/40",children:[1==t&&(0,n.jsx)(N,{onClose:a,moveToScreen:l}),2==t&&(0,n.jsx)(w,{onClose:a,moveToScreen:l}),3==t&&(0,n.jsx)(C,{onClose:a,moveToScreen:l}),4==t&&(0,n.jsx)(A,{onClose:a,moveToScreen:l}),5==t&&(0,n.jsx)(S,{onClose:a,moveToScreen:l})]})},D=()=>{var e;let[t,a]=(0,l.useState)(!1),[c,p]=(0,l.useState)(!1),[m,u]=(0,l.useState)(!1),[h,g]=(0,l.useState)(1),[v,N]=(0,l.useState)([]),[w,C]=(0,l.useState)(0),k=(0,r.G)(e=>e.user),S=(0,r.G)(e=>e.token.token),E=(0,r.j)(),A=new URLSearchParams({ref_code:(null===(e=k.referralCode)||void 0===e?void 0:e.toString())||""}).toString();return(0,l.useEffect)(()=>{(async()=>{console.log("----------------- Fetching referrals -----------------"),console.log("User Referral Code",k.referralCode),console.log("User statistics are",k),console.log("Its Access Token is: ",S);try{let e=await o.A.get("${process.env.NEXT_PUBLIC_SERVER_BASE_URL}/api/v1/referral?code=".concat(k.referralCode),{headers:{Authorization:"Bearer "+S,"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});console.log("Referral list is:",e.data.data),E((0,s.C$)(e.data.data));let t=0,a=[];e.data.data.forEach((e,n)=>{let l={order:n,name:"".concat(e.fname," ").concat(e.lname),commission:e.referral.bonusTotal,bonusClaimed:"UNCLAIMED"!==e.referral.bonusStatus};0!==v.length?v.forEach(e=>{e.order===l.order?console.log("Filleul already exists"):(a.push(l),console.log("Added the filleul: ",l.name))}):0===v.length&&a.push(l),"UNCLAIMED"===e.referral.bonusStatus&&(t+=e.referral.bonusTotal)}),N(a),C(t),console.log("------------- Finished fetching referrals -----------------")}catch(t){var e;console.log(t),(null===(e=t.response)||void 0===e?void 0:e.status)===500&&(console.log("--------------- Error of type 500 ---------------"),console.log("We suspect the user has no referrals"),E((0,s.C$)([])))}})()},[S,E,k.referralCode,v,k]),(0,n.jsxs)("div",{className:"h-full mb-[64px] lg:mb-0 grow flex flex-col lg:flex-row gap-[24px] rounded-lg sm:rounded-3xl",children:[(0,n.jsxs)("div",{className:"flex flex-col w-full grow mt-[80px] lg:mt-[0px] lg:w-[50%] px-[6px]",children:[(0,n.jsx)(i,{userData:k,setIsScreenVisible:a}),(0,n.jsx)(d,{userData:{cashback:k.cashback},referralBonus:w,filleulList:v}),(0,n.jsxs)("div",{className:"animate-fading-3 bg-white rounded-[12px] flex flex-col grow py-[12px] px-[24px] space-y-[24px]",children:[(0,n.jsxs)("div",{className:"block lg:hidden",children:[(0,n.jsxs)("div",{className:"flex justify-between items-end mb-[16px] font-bold",children:[(0,n.jsx)("h4",{className:"text-primary_dark text-[16px]",children:"Parrainage"}),(0,n.jsx)("h4",{className:"text-primary text-[12px]",children:"Voir les filleuls"})]}),(0,n.jsx)(x.A,{referralCode:k.referralCode,setIsDialogVisible:p})]}),(0,n.jsx)(f,{accessToken:S,rate:667})]})]}),(0,n.jsxs)("div",{className:"w-[25%] max-h-[900px] h-full grow",children:[(0,n.jsx)(b.A,{userName:k.name,userSurname:k.surname,isLogoutVisible:m,setIsLogoutVisible:u}),(0,n.jsxs)("div",{className:"".concat(m?"mt-[78px]":"mt-[36px]"," hidden grow lg:flex flex-col gap-[36px] justify-between h-full rounded-[12px] bg-white px-[24px] py-[32px] transition-all duration-500"),children:[(0,n.jsx)(x.A,{referralCode:k.referralCode,setIsDialogVisible:p}),(0,n.jsx)(y.A,{filleulList:v})]})]}),c&&!t&&(0,n.jsx)(j.A,{text:"".concat("http://localhost:3000","/auth/signup?").concat(A),onClose:()=>p(!1)}),t&&(0,n.jsx)(R,{screenIndex:h,closeScreen:()=>{a(!1),g(1)},movemoveToScreen:()=>{h<5?(g(e=>e+1),console.log("Moved to screen of index",h+1)):g(1)}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[266,150,512,33,429,391,651,442,757,970,822,340,342,441,517,358],()=>t(5088)),_N_E=e.O()}]);